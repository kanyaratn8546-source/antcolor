<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏µ‡∏™‡πÄ‡∏õ‡∏£‡∏¢‡πå - ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }

        /* Gradient Colors for Letters */
        .c1 { color: #4A148C; } .c2 { color: #551996; } .c3 { color: #601EA0; }
        .c4 { color: #6A23AA; } .c5 { color: #7528B4; } .c6 { color: #802DBE; }
        .c7 { color: #8B32C8; } .c8 { color: #9637D2; }
        .c9 { color: #D81B60; } .c10 { color: #E91E63; } .c11 { color: #F06292; }
        .c12 { color: #EC407A; } .c13 { color: #FF5252; } .c14 { color: #FF7043; }
        .c15 { color: #F4511E; }
        .c16 { color: #FB8C00; } .c17 { color: #FFA000; } .c18 { color: #FFB300; }
        .c19 { color: #FFC107; } .c20 { color: #FFCA28; } .c21 { color: #FFD54F; }
        .c22 { color: #FBC02D; } .c23 { color: #F9A825; } .c24 { color: #F57F17; }
        .c25 { color: #EF6C00; }

        .swatch { 
            width: 32px; 
            height: 32px; 
            border-radius: 10px; 
            display: inline-block; 
            vertical-align: middle; 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            border: 2px solid white;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideUp 0.4s ease-out; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .spray-badge {
            font-family: monospace;
            background: #e2e8f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #475569;
        }

        /* Camera UI */
        #camera-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1/1;
            margin: 0 auto;
            border-radius: 40px;
            overflow: hidden;
            background: #000;
            border: 8px solid white;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }
        #video-feed { width: 100%; height: 100%; object-fit: cover; }
        #reticle {
            position: absolute;
            top: 50%; left: 50%;
            width: 60px; height: 60px;
            border: 4px solid #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            box-shadow: 0 0 0 1000px rgba(0,0,0,0.5);
        }
        #reticle::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 8px; height: 8px;
            background: #ff3b30;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-5xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-2xl md:text-5xl font-bold mb-2 tracking-tight">
                <span class="c1">@</span><span class="c2">‡∏ß</span><span class="c3">‡∏¥</span><span class="c4">‡∏ó</span><span class="c5">‡∏¢</span><span class="c6">‡∏≤</span><span class="c7">‡∏•</span><span class="c8">‡∏±</span><span class="c9">‡∏¢</span><span class="c10">‡πÄ</span><span class="c11">‡∏ó</span><span class="c12">‡∏Ñ</span><span class="c13">‡∏ô</span><span class="c14">‡∏¥</span><span class="c15">‡∏Ñ</span><span class="c16">‡∏≠</span><span class="c17">‡∏≥</span><span class="c18">‡∏ô</span><span class="c19">‡∏≤</span><span class="c20">‡∏à</span><span class="c21">‡πÄ</span><span class="c22">‡∏à</span><span class="c23">‡∏£</span><span class="c24">‡∏¥</span><span class="c25">‡∏ç</span>
            </h1>
            <p class="text-slate-500 text-[10px] uppercase tracking-[0.2em]">Spray Paint Calibration & Troubleshooting v2.1</p>
        </header>

        <!-- Main Nav -->
        <nav class="grid grid-cols-5 gap-1 mb-8">
            <button onclick="showTab('info')" class="nav-btn p-3 rounded-2xl bg-white shadow-sm flex flex-col items-center gap-1 border-2 border-transparent transition-all">
                <span class="text-lg">üõ†Ô∏è</span>
                <span class="text-[9px] font-bold">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏á‡∏≤‡∏ô</span>
            </button>
            <button onclick="showTab('p-group')" class="nav-btn p-3 rounded-2xl bg-white shadow-sm flex flex-col items-center gap-1 border-2 border-transparent transition-all">
                <span class="text-lg">üü£</span>
                <span class="text-[9px] font-bold">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏°‡πà‡∏ß‡∏á</span>
            </button>
            <button onclick="showTab('r-group')" class="nav-btn p-3 rounded-2xl bg-white shadow-sm flex flex-col items-center gap-1 border-2 border-transparent transition-all">
                <span class="text-lg">üî¥</span>
                <span class="text-[9px] font-bold">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏°‡∏û‡∏π</span>
            </button>
            <button onclick="showTab('y-group')" class="nav-btn p-3 rounded-2xl bg-white shadow-sm flex flex-col items-center gap-1 border-2 border-transparent transition-all">
                <span class="text-lg">üü°</span>
                <span class="text-[9px] font-bold">‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</span>
            </button>
            <button onclick="startScanner()" class="nav-btn p-3 rounded-2xl bg-blue-600 text-white shadow-md flex flex-col items-center gap-1 border-2 border-transparent transition-all active:scale-95">
                <span class="text-lg">üì∑</span>
                <span class="text-[9px] font-bold">‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏µ</span>
            </button>
        </nav>

        <!-- Tab: Info -->
        <div id="info" class="tab-content active space-y-4">
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-blue-600 mb-3 flex items-center gap-2">
                    <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                    ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡∏™‡πÄ‡∏õ‡∏£‡∏¢‡πå
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs text-slate-600 leading-relaxed">
                    <div class="bg-slate-50 p-4 rounded-2xl">
                        <p class="font-bold mb-1 text-slate-800">1. ‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡∏≤ (Primer)</p>
                        ‡∏û‡πà‡∏ô‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡∏≤ (‡∏£‡∏´‡∏±‡∏™ #70) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏ß‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô
                    </div>
                    <div class="bg-slate-50 p-4 rounded-2xl">
                        <p class="font-bold mb-1 text-slate-800">2. ‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß (Undercoat)</p>
                        ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡∏û‡πà‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß (#40) ‡∏ö‡∏≤‡∏á‡πÜ 2 ‡∏£‡∏≠‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏µ‡∏à‡∏£‡∏¥‡∏á (‡∏°‡πà‡∏ß‡∏á/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
                    </div>
                    <div class="bg-slate-50 p-4 rounded-2xl">
                        <p class="font-bold mb-1 text-slate-800">3. ‡∏£‡∏∞‡∏¢‡∏∞‡∏û‡πà‡∏ô</p>
                        ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô 20-30 ‡∏ã‡∏°. ‡∏û‡πà‡∏ô‡πÇ‡∏õ‡∏£‡∏¢‡πÜ ‡∏≠‡∏¢‡πà‡∏≤‡∏à‡∏µ‡πâ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏™‡∏µ‡∏à‡∏∞‡πÄ‡∏¢‡∏¥‡πâ‡∏°
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Tables -->
        <div id="p-group" class="tab-content">
            <div class="bg-white rounded-3xl shadow-sm overflow-x-auto">
                <table class="w-full text-left text-sm min-w-[600px]">
                    <thead class="bg-slate-50 text-[10px] uppercase text-slate-400">
                        <tr>
                            <th class="p-4 w-20">‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</th>
                            <th class="p-4 w-16">‡∏™‡∏µ</th>
                            <th class="p-4 w-48">‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</th>
                            <th class="p-4">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody id="p-group-body"></tbody>
                </table>
            </div>
        </div>

        <div id="r-group" class="tab-content">
            <div class="bg-white rounded-3xl shadow-sm overflow-x-auto">
                <table class="w-full text-left text-sm min-w-[600px]">
                    <thead class="bg-slate-50 text-[10px] uppercase text-slate-400">
                        <tr>
                            <th class="p-4 w-20">‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</th>
                            <th class="p-4 w-16">‡∏™‡∏µ</th>
                            <th class="p-4 w-48">‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</th>
                            <th class="p-4">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody id="r-group-body"></tbody>
                </table>
            </div>
        </div>

        <div id="y-group" class="tab-content">
            <div class="bg-white rounded-3xl shadow-sm overflow-x-auto">
                <table class="w-full text-left text-sm min-w-[600px]">
                    <thead class="bg-slate-50 text-[10px] uppercase text-slate-400">
                        <tr>
                            <th class="p-4 w-20">‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</th>
                            <th class="p-4 w-16">‡∏™‡∏µ</th>
                            <th class="p-4 w-48">‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</th>
                            <th class="p-4">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody id="y-group-body"></tbody>
                </table>
            </div>
        </div>

        <!-- Tab: Scanner -->
        <div id="scanner" class="tab-content text-center space-y-6">
            <div id="camera-error-msg" class="hidden bg-red-50 text-red-600 p-4 rounded-2xl text-xs font-bold border border-red-100">
                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
            </div>
            
            <div id="camera-container">
                <video id="video-feed" autoplay playsinline muted></video>
                <div id="reticle"></div>
                <canvas id="scan-canvas" class="hidden"></canvas>
            </div>

            <div class="flex justify-center gap-4">
                <div class="bg-white p-4 rounded-3xl shadow-sm w-32 border border-slate-100">
                    <p class="text-[9px] uppercase text-slate-400 mb-2 font-bold">‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö</p>
                    <div id="scanned-swatch" class="w-full h-12 rounded-xl bg-slate-200 mb-2"></div>
                    <p id="scanned-hex" class="font-mono text-[10px] font-bold">#------</p>
                </div>
                <div class="bg-white p-4 rounded-3xl shadow-sm w-48 border border-slate-100 flex flex-col justify-center">
                    <p class="text-[9px] uppercase text-slate-400 mb-2 font-bold">‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
                    <p id="match-info" class="text-lg font-bold text-blue-600">--</p>
                    <p id="accuracy-score" class="text-[10px] font-bold text-slate-400">Accuracy: 0%</p>
                </div>
            </div>

            <button onclick="stopScanner()" class="bg-slate-800 text-white px-8 py-3 rounded-2xl font-bold text-sm shadow-lg active:scale-95 transition-all">
                ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏µ
            </button>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-slate-300 text-[10px] tracking-widest font-light pb-10 uppercase">
            Amnat Charoen Technical College | Arts & Design Division
        </footer>
    </div>

    <script>
        const sprayPalette = [
            { char: '@', hex: '#4A148C', code: 'P-1 Deep Purple', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏≠‡∏±‡∏î‡∏ã‡πâ‡∏≥ 1-2 ‡∏£‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å', cat: 'p-group' },
            { char: '‡∏ß', hex: '#551996', code: 'P-2 Royal Purple', fix: '‡∏ñ‡πâ‡∏≤‡∏°‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏™‡∏µ‡πÉ‡∏™ (Lacquer) ‡∏ó‡∏±‡∏ö‡∏à‡∏∞‡∏Ç‡∏±‡∏ö‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏Ç‡∏∂‡πâ‡∏ô', cat: 'p-group' },
            { char: '‡∏¥', hex: '#601EA0', code: 'P-3 Violet', fix: '‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡πâ‡∏≥‡πÑ‡∏õ ‡∏£‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°', cat: 'p-group' },
            { char: '‡∏ó', hex: '#6A23AA', code: 'P-4 Orchid', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡∏µ‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÇ‡∏õ‡∏£‡∏¢‡∏´‡πà‡∏≤‡∏á‡πÜ 30 ‡∏ã‡∏°. ‡∏≠‡∏µ‡∏Å 1 ‡∏£‡∏≠‡∏ö', cat: 'p-group' },
            { char: '‡∏¢', hex: '#7528B4', code: 'P-5 Lavender', fix: '‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏£‡∏≤‡∏¢‡πÄ‡∏ö‡∏≠‡∏£‡πå 1000 ‡∏•‡∏π‡∏ö‡∏≠‡∏≠‡∏Å‡∏ö‡∏≤‡∏á‡πÜ', cat: 'p-group' },
            { char: '‡∏≤', hex: '#802DBE', code: 'P-6 Bright Violet', fix: '‡∏ñ‡πâ‡∏≤‡∏î‡∏π‡πÅ‡∏´‡πâ‡∏á‡∏Å‡∏£‡∏≤‡∏î ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡πÄ‡∏á‡∏≤‡∏ó‡∏±‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏°‡∏≤‡∏î', cat: 'p-group' },
            { char: '‡∏•', hex: '#8B32C8', code: 'P-7 Light Purple', fix: '‡∏ñ‡πâ‡∏≤‡∏à‡∏∑‡∏î‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏ã‡πâ‡∏≥‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏µ‡∏ö‡∏≤‡∏á', cat: 'p-group' },
            { char: '‡∏±', hex: '#9637D2', code: 'P-8 Pastel Purple', fix: '‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏≤ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡∏ß‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏û‡πà‡∏ô‡∏Ç‡∏≤‡∏ß‡∏ó‡∏±‡∏ö', cat: 'p-group' },
            { char: '‡∏¢', hex: '#D81B60', code: 'M-1 Magenta', fix: '‡∏ñ‡πâ‡∏≤‡πÅ‡∏î‡∏á‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÇ‡∏õ‡∏£‡∏¢‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏≠‡πà‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏à‡∏≤‡∏á‡πÜ 1 ‡∏£‡∏≠‡∏ö', cat: 'r-group' },
            { char: '‡πÄ', hex: '#E91E63', code: 'M-2 Rose Pink', fix: '‡∏ñ‡πâ‡∏≤‡∏î‡∏π‡∏Ñ‡∏•‡πâ‡∏≥ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏™‡πâ‡∏°‡∏≠‡πà‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏ö‡∏≤‡∏á‡πÜ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î', cat: 'r-group' },
            { char: '‡∏ó', hex: '#F06292', code: 'M-3 Pink', fix: '‡∏ñ‡πâ‡∏≤‡∏ã‡∏µ‡∏î‡πÑ‡∏õ ‡∏û‡πà‡∏ô‡∏ã‡πâ‡∏≥ 2 ‡∏£‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á 5 ‡∏ô‡∏≤‡∏ó‡∏µ', cat: 'r-group' },
            { char: '‡∏Ñ', hex: '#EC407A', code: 'M-4 Candy Pink', fix: '‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏û‡πà‡∏ô‡∏´‡∏ô‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏™‡∏µ‡∏à‡∏∞‡∏¢‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á‡∏ä‡πâ‡∏≤', cat: 'r-group' },
            { char: '‡∏ô', hex: '#FF5252', code: 'R-1 Signal Red', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡πâ‡∏°‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏≠‡∏±‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏î‡∏á‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÉ‡∏Å‡∏•‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', cat: 'r-group' },
            { char: '‡∏¥', hex: '#FF7043', code: 'R-2 Coral', fix: '‡∏ñ‡πâ‡∏≤‡∏ä‡∏°‡∏û‡∏π‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÇ‡∏õ‡∏£‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏±‡∏ö‡∏à‡∏≤‡∏á‡πÜ ‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡πÇ‡∏ó‡∏ô Coral', cat: 'r-group' },
            { char: '‡∏Ñ', hex: '#F4511E', code: 'R-3 Deep Orange', fix: '‡∏ñ‡πâ‡∏≤‡∏î‡∏π‡πÑ‡∏´‡∏°‡πâ/‡∏Ñ‡∏•‡πâ‡∏≥ ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏ö‡∏ú‡∏¥‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏µ‡∏ô‡∏≠‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏û‡πà‡∏ô‡∏™‡πâ‡∏°‡∏ó‡∏±‡∏ö', cat: 'r-group' },
            { char: '‡∏≠', hex: '#FB8C00', code: 'O-1 Orange', fix: '‡∏ñ‡πâ‡∏≤‡∏à‡∏∑‡∏î‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡∏™‡πâ‡∏°‡∏™‡∏î‡∏ó‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô', cat: 'y-group' },
            { char: '‡∏≥', hex: '#FFA000', code: 'O-2 Dark Yellow', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡πâ‡∏°‡πÇ‡∏î‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡∏¢‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏µ', cat: 'y-group' },
            { char: '‡∏ô', hex: '#FFB300', code: 'Y-1 Golden Yellow', fix: '‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏á‡∏≤‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏≠‡∏á ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡πÄ‡∏á‡∏≤‡∏ä‡πà‡∏ß‡∏¢', cat: 'y-group' },
            { char: '‡∏≤', hex: '#FFC107', code: 'Y-2 Amber', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡∏µ‡∏î‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡πâ‡∏≤‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏û‡πà‡∏ô‡∏ã‡πâ‡∏≥‡∏ï‡∏£‡∏á‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠', cat: 'y-group' },
            { char: '‡∏à', hex: '#FFCA28', code: 'Y-3 Yellow', fix: '‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏°‡∏±‡∏Å‡∏õ‡∏¥‡∏î‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏¢‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡∏û‡πà‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô', cat: 'y-group' },
            { char: '‡πÄ', hex: '#FFD54F', code: 'Y-4 Lemon Yellow', fix: '‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏µ‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô', cat: 'y-group' },
            { char: '‡∏à', hex: '#FBC02D', code: 'Y-5 Bright Yellow', fix: '‡∏´‡πâ‡∏≤‡∏°‡∏û‡πà‡∏ô‡∏ó‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡∏≤‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡∏à‡∏∞‡∏î‡∏π‡∏´‡∏°‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ', cat: 'y-group' },
            { char: '‡∏£', hex: '#F9A825', code: 'Y-6 Sunflower', fix: '‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÇ‡∏õ‡∏£‡∏¢‡∏™‡πâ‡∏°‡∏à‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡∏≠‡∏Å', cat: 'y-group' },
            { char: '‡∏¥', hex: '#F57F17', code: 'Y-7 Honey', fix: '‡∏ñ‡πâ‡∏≤‡∏™‡∏µ‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö ‡πÉ‡∏´‡πâ‡∏Ç‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏£‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏ö‡∏≠‡∏£‡πå 2000', cat: 'y-group' },
            { char: '‡∏ç', hex: '#EF6C00', code: 'O-3 Chrome Orange', fix: '‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡πâ‡∏≥‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏û‡πà‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏ó‡∏±‡∏ö‡∏ö‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á', cat: 'y-group' }
        ];

        function renderData() {
            ['p-group-body', 'r-group-body', 'y-group-body'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.innerHTML = "";
            });

            sprayPalette.forEach(item => {
                const row = `
                    <tr class="border-b border-slate-50 last:border-0 hover:bg-slate-50 transition-colors">
                        <td class="p-4 font-bold text-lg">${item.char}</td>
                        <td class="p-4"><div class="swatch" style="background:${item.hex}"></div></td>
                        <td class="p-4">
                            <div class="spray-badge mb-1">${item.code}</div>
                        </td>
                        <td class="p-4 text-[11px] text-slate-500 leading-relaxed font-medium">
                            <span class="text-blue-500 font-bold block mb-1">üí° ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:</span>
                            ${item.fix}
                        </td>
                    </tr>
                `;
                const container = document.getElementById(`${item.cat}-body`);
                if (container) {
                    container.innerHTML += row;
                }
            });
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('border-blue-500', 'bg-blue-50', 'ring-4', 'ring-blue-100');
            });
            
            const targetTab = document.getElementById(id);
            if (targetTab) targetTab.classList.add('active');
            
            const btn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick') && b.getAttribute('onclick').includes(`'${id}'`));
            if (btn && id !== 'info') {
                btn.classList.add('border-blue-500', 'bg-blue-50');
            }
            if (id !== 'scanner') stopScanner();
        }

        let scannerActive = false;
        let stream = null;

        async function startScanner() {
            showTab('scanner');
            const video = document.getElementById('video-feed');
            const errorEl = document.getElementById('camera-error-msg');
            errorEl.classList.add('hidden');
            
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
            } catch (e) {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ video: true });
                } catch (err) {
                    errorEl.classList.remove('hidden');
                    return;
                }
            }

            if (stream) {
                video.srcObject = stream;
                scannerActive = true;
                requestAnimationFrame(scanLoop);
            }
        }

        function stopScanner() {
            if (stream) {
                stream.getTracks().forEach(t => t.stop());
                stream = null;
                scannerActive = false;
            }
        }

        function scanLoop() {
            if (!scannerActive) return;
            const video = document.getElementById('video-feed');
            const canvas = document.getElementById('scan-canvas');
            const ctx = canvas.getContext('2d', { willReadFrequently: true });

            if (video.readyState === video.HAVE_ENOUGH_DATA) {
                canvas.width = 100; canvas.height = 100;
                ctx.drawImage(video, video.videoWidth/2 - 10, video.videoHeight/2 - 10, 20, 20, 0, 0, 100, 100);
                const pix = ctx.getImageData(50, 50, 1, 1).data;
                const rgb = { r: pix[0], g: pix[1], b: pix[2] };
                const hex = "#" + ((1 << 24) + (rgb.r << 16) + (rgb.g << 8) + rgb.b).toString(16).slice(1);
                
                document.getElementById('scanned-swatch').style.backgroundColor = hex;
                document.getElementById('scanned-hex').innerText = hex.toUpperCase();
                
                matchColor(rgb);
            }
            requestAnimationFrame(scanLoop);
        }

        function matchColor(rgb) {
            let min = Infinity;
            let best = null;

            sprayPalette.forEach(p => {
                const target = hexToRgb(p.hex);
                const dist = Math.sqrt(
                    Math.pow(rgb.r - target.r, 2) +
                    Math.pow(rgb.g - target.g, 2) +
                    Math.pow(rgb.b - target.b, 2)
                );
                if (dist < min) { min = dist; best = p; }
            });

            if (best) {
                const acc = Math.max(0, 100 - (min / 4.5)).toFixed(1);
                document.getElementById('match-info').innerText = `‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ "${best.char}"`;
                document.getElementById('accuracy-score').innerText = `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥: ${acc}%`;
                document.getElementById('match-info').style.color = best.hex;
            }
        }

        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1,3), 16);
            const g = parseInt(hex.slice(3,5), 16);
            const b = parseInt(hex.slice(5,7), 16);
            return {r, g, b};
        }

        window.onload = function() {
            renderData();
        };
    </script>
</body>
</html>
