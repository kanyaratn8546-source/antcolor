<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏µ - ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #fdfdfd;
            color: #334155;
            padding: 0;
            margin: 0;
        }

        /* 25 ‡πÄ‡∏â‡∏î‡∏™‡∏µ‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
        .c1 { color: #4A148C; } .c2 { color: #551996; } .c3 { color: #601EA0; }
        .c4 { color: #6A23AA; } .c5 { color: #7528B4; } .c6 { color: #802DBE; }
        .c7 { color: #8B32C8; } .c8 { color: #9637D2; }
        .c9 { color: #D81B60; } .c10 { color: #E91E63; } .c11 { color: #F06292; }
        .c12 { color: #EC407A; } .c13 { color: #FF5252; } .c14 { color: #FF7043; }
        .c15 { color: #F4511E; }
        .c16 { color: #FB8C00; } .c17 { color: #FFA000; } .c18 { color: #FFB300; }
        .c19 { color: #FFC107; } .c20 { color: #FFCA28; } .c21 { color: #FFD54F; }
        .c22 { color: #FBC02D; } .c23 { color: #F9A825; } .c24 { color: #F57F17; }
        .c25 { color: #EF6C00; }

        .swatch { 
            width: 28px; 
            height: 28px; 
            border-radius: 8px; 
            display: inline-block; 
            vertical-align: middle; 
            border: 1px solid rgba(0,0,0,0.1); 
        }

        .tab-content { display: none; padding: 20px; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .mixing-unit {
            font-family: monospace;
            background: #f1f5f9;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
        .col-char { width: 60px; text-align: center; }
        .col-color { width: 80px; text-align: center; }
        .col-formula { width: 220px; }

        table { border-spacing: 0; width: 100%; border-collapse: collapse; }
        th { background-color: #f8fafc; border-bottom: 2px solid #e2e8f0; color: #64748b; font-size: 0.75rem; text-transform: uppercase; padding: 12px; }
        td { border-bottom: 1px solid #f1f5f9; padding: 12px; }

        /* Camera Scanner Styles */
        #camera-wrapper {
            max-width: 450px;
            margin: 0 auto;
        }
        #camera-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1/1;
            background: #000;
            border-radius: 32px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        #video-feed { width: 100%; height: 100%; object-fit: cover; }
        #reticle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            border: 3px solid #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 0 1000px rgba(0,0,0,0.4);
            pointer-events: none;
            z-index: 10;
        }
        #reticle::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 6px; height: 6px;
            background: #ff0000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-5xl mx-auto">
        <!-- Header Section -->
        <header class="text-center mb-10">
            <div class="text-3xl md:text-6xl font-bold tracking-tighter mb-4 leading-tight">
                <span class="c1">@</span><span class="c2">‡∏ß</span><span class="c3">‡∏¥</span><span class="c4">‡∏ó</span><span class="c5">‡∏¢</span><span class="c6">‡∏≤</span><span class="c7">‡∏•</span><span class="c8">‡∏±</span><span class="c9">‡∏¢</span><span class="c10">‡πÄ</span><span class="c11">‡∏ó</span><span class="c12">‡∏Ñ</span><span class="c13">‡∏ô</span><span class="c14">‡∏¥</span><span class="c15">‡∏Ñ</span><span class="c16">‡∏≠</span><span class="c17">‡∏≥</span><span class="c18">‡∏ô</span><span class="c19">‡∏≤</span><span class="c20">‡∏à</span><span class="c21">‡πÄ</span><span class="c22">‡∏à</span><span class="c23">‡∏£</span><span class="c24">‡∏¥</span><span class="c25">‡∏ç</span>
            </div>
            <p class="text-slate-400 text-xs uppercase tracking-widest font-light">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏µ‡∏ó‡∏≤‡∏à‡∏£‡∏¥‡∏á - ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç</p>
        </header>

        <!-- Navigation -->
        <nav class="flex flex-wrap justify-center gap-2 mb-8">
            <button onclick="showTab('setup')" class="nav-btn px-5 py-2 rounded-xl bg-slate-100 font-bold text-xs transition-all active:scale-95 shadow-sm">1. ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</button>
            <button onclick="showTab('purple')" class="nav-btn px-5 py-2 rounded-xl bg-purple-50 text-purple-700 font-bold text-xs transition-all active:scale-95 shadow-sm border border-purple-100">2. ‡∏°‡πà‡∏ß‡∏á</button>
            <button onclick="showTab('transition')" class="nav-btn px-5 py-2 rounded-xl bg-pink-50 text-pink-700 font-bold text-xs transition-all active:scale-95 shadow-sm border border-pink-100">3. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°</button>
            <button onclick="showTab('yellow')" class="nav-btn px-5 py-2 rounded-xl bg-yellow-50 text-yellow-700 font-bold text-xs transition-all active:scale-95 shadow-sm border border-yellow-100">4. ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</button>
            <button onclick="startScanner()" class="nav-btn px-5 py-2 rounded-xl bg-blue-600 text-white font-bold text-xs transition-all active:scale-95 shadow-md flex items-center gap-2">
                <span>üì∑</span> 5. ‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏µ
            </button>
        </nav>

        <!-- Tab Content: Setup -->
        <div id="setup" class="tab-content active space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                    <h3 class="text-lg font-bold mb-4 text-blue-600 flex items-center gap-2">
                        <span class="w-1.5 h-5 bg-blue-500 rounded-full"></span>
                        ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                    </h3>
                    <ul class="space-y-3 text-sm text-slate-600">
                        <li class="flex items-center gap-3">üî¥ ‡πÅ‡∏î‡∏á / üü° ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á / üîµ ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô - ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ 1</li>
                        <li class="flex items-center gap-3 font-bold text-blue-700">‚ö™ ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß - ‡∏Ç‡∏ß‡∏î‡πÉ‡∏´‡∏ç‡πà (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)</li>
                        <li class="flex items-center gap-3">üíâ ‡∏™‡∏•‡∏¥‡∏á 2 ‡∏≠‡∏±‡∏ô / ü•§ ‡∏ñ‡πâ‡∏ß‡∏¢‡πÅ‡∏ö‡πà‡∏á 25 ‡πÉ‡∏ö</li>
                    </ul>
                </div>
                <div class="bg-red-50 p-6 rounded-3xl border border-red-100 shadow-sm">
                    <h3 class="text-lg font-bold mb-4 text-red-700 flex items-center gap-2">
                        <span class="w-1.5 h-5 bg-red-500 rounded-full"></span>
                        ‡∏à‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏à
                    </h3>
                    <p class="text-xs text-red-800 leading-relaxed font-bold italic">
                        "‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏µ‡∏ï‡∏≠‡∏ô‡πÅ‡∏´‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô! ‡∏™‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏à‡∏∞‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á 10-20% ‡πÄ‡∏™‡∏°‡∏≠"
                    </p>
                </div>
            </div>
        </div>

        <!-- Tab: Scanner -->
        <div id="scanner" class="tab-content space-y-6">
            <div id="camera-wrapper">
                <div id="camera-container">
                    <video id="video-feed" autoplay playsinline muted></video>
                    <div id="reticle"></div>
                    <canvas id="scan-canvas" class="hidden"></canvas>
                </div>

                <div class="grid grid-cols-2 gap-3 mt-6">
                    <div class="bg-slate-100 p-3 rounded-2xl text-center border border-slate-200 shadow-sm">
                        <p class="text-[9px] uppercase text-slate-500 mb-1">‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡πà‡∏≠‡∏á</p>
                        <div id="scanned-swatch" class="w-full h-10 rounded-lg bg-slate-300 mb-1 border border-white"></div>
                        <p id="scanned-hex" class="font-mono text-[10px] font-bold">#------</p>
                    </div>
                    <div class="bg-slate-100 p-3 rounded-2xl text-center border border-slate-200 shadow-sm">
                        <p class="text-[9px] uppercase text-slate-500 mb-1">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö</p>
                        <div id="target-swatch" class="w-full h-10 rounded-lg bg-slate-300 mb-1 border border-white"></div>
                        <p id="match-info" class="font-bold text-[11px] text-blue-700">--</p>
                    </div>
                </div>

                <div class="bg-blue-600 p-4 rounded-2xl text-center text-white shadow-lg mt-4">
                    <div class="text-[10px] opacity-80 mb-1 font-bold uppercase tracking-widest">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ (Accuracy)</div>
                    <div class="text-4xl font-bold" id="accuracy-score">0%</div>
                </div>

                <button onclick="stopScanner()" class="w-full mt-4 bg-slate-800 text-white py-3 rounded-xl font-bold text-sm shadow-md hover:bg-slate-700">
                    ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πÅ‡∏Å‡∏ô
                </button>
            </div>
        </div>

        <!-- Tab Content: Color Tables -->
        <div id="purple" class="tab-content">
            <div class="overflow-x-auto">
                <table class="text-sm">
                    <thead>
                        <tr>
                            <th class="col-char">‡∏ï‡∏±‡∏ß</th>
                            <th class="col-color">‡∏™‡∏µ</th>
                            <th class="col-formula">‡∏™‡∏π‡∏ï‡∏£‡∏ú‡∏™‡∏° (‡∏™‡πà‡∏ß‡∏ô)</th>
                            <th class="text-left">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ</th>
                        </tr>
                    </thead>
                    <tbody id="purple-body"></tbody>
                </table>
            </div>
        </div>

        <div id="transition" class="tab-content">
            <div class="overflow-x-auto">
                <table class="text-sm">
                    <thead>
                        <tr>
                            <th class="col-char">‡∏ï‡∏±‡∏ß</th>
                            <th class="col-color">‡∏™‡∏µ</th>
                            <th class="col-formula">‡∏™‡∏π‡∏ï‡∏£‡∏ú‡∏™‡∏° (‡∏™‡πà‡∏ß‡∏ô)</th>
                            <th class="text-left">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ</th>
                        </tr>
                    </thead>
                    <tbody id="transition-body"></tbody>
                </table>
            </div>
        </div>

        <div id="yellow" class="tab-content">
            <div class="overflow-x-auto">
                <table class="text-sm">
                    <thead>
                        <tr>
                            <th class="col-char">‡∏ï‡∏±‡∏ß</th>
                            <th class="col-color">‡∏™‡∏µ</th>
                            <th class="col-formula">‡∏™‡∏π‡∏ï‡∏£‡∏ú‡∏™‡∏° (‡∏™‡πà‡∏ß‡∏ô)</th>
                            <th class="text-left">‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ</th>
                        </tr>
                    </thead>
                    <tbody id="yellow-body"></tbody>
                </table>
            </div>
        </div>

        <footer class="mt-16 py-6 border-t border-slate-100 text-center text-slate-400 text-[10px] tracking-widest font-light">
            ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç | ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏Å‡∏£‡∏£‡∏° ¬© 2026
        </footer>
    </div>

    <script>
        const palette = [
            { char: '@', hex: '#4A148C', formula: '‡∏ô‡∏á 7 : ‡∏î 3', fix: '‡∏°‡∏∑‡∏î‡πÑ‡∏õ +‡∏Ç‡∏≤‡∏ß / ‡πÅ‡∏î‡∏á‡πÑ‡∏õ +‡∏ô‡∏á', cat: 'purple' },
            { char: '‡∏ß', hex: '#551996', formula: '‡∏ô‡∏á 6 : ‡∏î 4', fix: '‡∏°‡∏∑‡∏î‡πÑ‡∏õ +‡∏Ç‡∏≤‡∏ß‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡∏¥‡∏î', cat: 'purple' },
            { char: '‡∏¥', hex: '#601EA0', formula: '‡∏ô‡∏á 5 : ‡∏î 5', fix: '‡∏°‡πà‡∏ß‡∏á ‡∏ú‡∏™‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô', cat: 'purple' },
            { char: '‡∏ó', hex: '#6A23AA', formula: '(‡∏ô‡∏á 5:‡∏î 5) +‡∏Ç‡∏≤‡∏ß‡∏à‡∏¥‡πã‡∏ß', fix: '+‡∏Ç‡∏≤‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏µ', cat: 'purple' },
            { char: '‡∏¢', hex: '#7528B4', formula: '‡∏°‡πà‡∏ß‡∏á +‡∏Ç‡∏≤‡∏ß 1', fix: '‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏´‡∏¢‡∏î‡∏Ç‡∏≤‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°', cat: 'purple' },
            { char: '‡∏≤', hex: '#802DBE', formula: '‡∏°‡πà‡∏ß‡∏á +‡∏Ç‡∏≤‡∏ß 2', fix: '‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß ‡∏¢', cat: 'purple' },
            { char: '‡∏•', hex: '#8B32C8', formula: '‡∏°‡πà‡∏ß‡∏á +‡∏Ç‡∏≤‡∏ß 3', fix: '‡∏à‡∏∑‡∏î‡πÑ‡∏õ +‡∏ô‡∏á/‡πÅ‡∏î‡∏á', cat: 'purple' },
            { char: '‡∏±', hex: '#9637D2', formula: '‡∏°‡πà‡∏ß‡∏á +‡∏Ç‡∏≤‡∏ß‡∏°‡∏≤‡∏Å', fix: '‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏™‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°', cat: 'purple' },
            { char: '‡∏¢', hex: '#D81B60', formula: '‡∏î 8 : ‡∏ô‡∏á 1 : ‡∏Ç‡∏≤‡∏ß 1', fix: '‡∏°‡πà‡∏ß‡∏á‡πÑ‡∏õ +‡πÅ‡∏î‡∏á / ‡πÅ‡∏î‡∏á‡πÑ‡∏õ +‡∏ô‡∏á', cat: 'transition' },
            { char: '‡πÄ', hex: '#E91E63', formula: '‡∏î 9 : ‡∏Ç‡∏≤‡∏ß 1', fix: '‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏™‡∏ô‡∏á ‡∏ñ‡πâ‡∏≤‡∏°‡∏∑‡∏î +‡∏Ç‡∏≤‡∏ß', cat: 'transition' },
            { char: '‡∏ó', hex: '#F06292', formula: '‡∏î 8 : ‡∏Ç‡∏≤‡∏ß 2', fix: '‡∏ã‡∏µ‡∏î‡πÑ‡∏õ +‡πÅ‡∏î‡∏á‡∏™‡∏î', cat: 'transition' },
            { char: '‡∏Ñ', hex: '#EC407A', formula: '‡∏ä‡∏°‡∏û‡∏π‡∏™‡∏î +‡∏ô‡∏á‡∏à‡∏¥‡πã‡∏ß', fix: '‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏ô‡∏á‡πÄ‡∏¢‡∏≠‡∏∞‡∏™‡∏µ‡∏à‡∏∞‡∏ï‡∏∏‡πà‡∏ô', cat: 'transition' },
            { char: '‡∏ô', hex: '#FF5252', formula: '‡∏î 8 : ‡∏• 2', fix: '‡∏™‡πâ‡∏°‡πÑ‡∏õ +‡πÅ‡∏î‡∏á', cat: 'transition' },
            { char: '‡∏¥', hex: '#FF7043', formula: '‡∏î 6 : ‡∏• 4', fix: '‡πÅ‡∏î‡∏á‡πÑ‡∏õ +‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°', cat: 'transition' },
            { char: '‡∏Ñ', hex: '#F4511E', formula: '‡∏î 5 : ‡∏• 5', fix: '‡∏ú‡∏™‡∏°‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏™‡πâ‡∏°‡∏≠‡∏¥‡∏ê‡∏™‡∏î', cat: 'transition' },
            { char: '‡∏≠', hex: '#FB8C00', formula: '‡∏• 4 : ‡∏î 6', fix: '‡∏°‡∏∑‡∏î‡πÑ‡∏õ +‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', cat: 'yellow' },
            { char: '‡∏≥', hex: '#FFA000', formula: '‡∏• 7 : ‡∏î 3', fix: '‡∏™‡πâ‡∏°‡πÑ‡∏õ +‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á / ‡∏à‡∏∑‡∏î‡πÑ‡∏õ +‡πÅ‡∏î‡∏á', cat: 'yellow' },
            { char: '‡∏ô', hex: '#FFB300', formula: '‡∏• 8 : ‡∏î 2', fix: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á ‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏î‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏Ç‡πá‡∏°', cat: 'yellow' },
            { char: '‡∏≤', hex: '#FFC107', formula: '‡∏• 9 : ‡∏î 1', fix: '‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á', cat: 'yellow' },
            { char: '‡∏à', hex: '#FFCA28', formula: '‡∏• 9 : ‡∏™‡πâ‡∏°‡∏à‡∏¥‡πã‡∏ß', fix: '‡πÉ‡∏™‡πÑ‡∏õ +‡∏Ç‡∏≤‡∏ß‡∏õ‡∏•‡∏≤‡∏¢‡∏û‡∏π‡πà‡∏Å‡∏±‡∏ô', cat: 'yellow' },
            { char: '‡πÄ', hex: '#FFD54F', formula: '‡∏• 10 (‡∏•‡πâ‡∏ß‡∏ô)', fix: '‡∏™‡∏µ‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', cat: 'yellow' },
            { char: '‡∏à', hex: '#FBC02D', formula: '‡∏• 10 (‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏°)', fix: '‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏î', cat: 'yellow' },
            { char: '‡∏£', hex: '#F9A825', formula: '‡∏• 9 : ‡∏î 1', fix: '‡∏™‡πâ‡∏°‡πÑ‡∏õ +‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°', cat: 'yellow' },
            { char: '‡∏¥', hex: '#F57F17', formula: '‡∏• 8 : ‡∏î 2', fix: '‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏Å‡∏±‡∏ö ‡∏£', cat: 'yellow' },
            { char: '‡∏ç', hex: '#EF6C00', formula: '‡∏• 3 : ‡∏î 7', fix: '‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏™‡πâ‡∏°‡∏ó‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏°', cat: 'yellow' }
        ];

        function renderTables() {
            document.getElementById(`purple-body`).innerHTML = "";
            document.getElementById(`transition-body`).innerHTML = "";
            document.getElementById(`yellow-body`).innerHTML = "";
            
            palette.forEach(p => {
                const row = `<tr>
                    <td class="font-bold col-char">${p.char}</td>
                    <td class="col-color"><div class="swatch" style="background:${p.hex}"></div></td>
                    <td class="col-formula"><span class="mixing-unit">${p.formula}</span></td>
                    <td class="text-slate-500 text-[10px] leading-tight">${p.fix}</td>
                </tr>`;
                document.getElementById(`${p.cat}-body`).innerHTML += row;
            });
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500', 'bg-white', 'shadow-md', 'scale-105');
                btn.classList.add('bg-slate-50', 'text-slate-500');
            });
            
            const activeTab = document.getElementById(tabId);
            activeTab.classList.add('active');
            
            const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(tabId));
            if (activeBtn) {
                activeBtn.classList.add('ring-2', 'ring-blue-500', 'bg-white', 'shadow-md', 'scale-105');
                activeBtn.classList.remove('bg-slate-50', 'text-slate-500');
            }
            
            if (tabId !== 'scanner' && scannerActive) stopScanner();
        }

        let scannerActive = false;
        let videoStream = null;

        async function startScanner() {
            showTab('scanner');
            const video = document.getElementById('video-feed');
            try {
                videoStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
                video.srcObject = videoStream;
                scannerActive = true;
                requestAnimationFrame(scanLoop);
            } catch (err) {
                alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ");
            }
        }

        function stopScanner() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                scannerActive = false;
                showTab('setup');
            }
        }

        function scanLoop() {
            if (!scannerActive) return;

            const video = document.getElementById('video-feed');
            const canvas = document.getElementById('scan-canvas');
            const ctx = canvas.getContext('2d');

            if (video.readyState === video.HAVE_ENOUGH_DATA) {
                canvas.width = 100;
                canvas.height = 100;
                // ‡∏™‡∏∏‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏µ‡∏à‡∏∏‡∏î‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á
                ctx.drawImage(video, video.videoWidth/2 - 5, video.videoHeight/2 - 5, 10, 10, 0, 0, 100, 100);
                
                const imageData = ctx.getImageData(50, 50, 1, 1).data;
                const rgb = { r: imageData[0], g: imageData[1], b: imageData[2] };
                const hex = rgbToHex(rgb.r, rgb.g, rgb.b);

                document.getElementById('scanned-swatch').style.backgroundColor = hex;
                document.getElementById('scanned-hex').innerText = hex.toUpperCase();

                findClosest(rgb);
            }
            requestAnimationFrame(scanLoop);
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function findClosest(scannedRgb) {
            let minDistance = Infinity;
            let closest = null;

            palette.forEach(p => {
                const targetRgb = hexToRgb(p.hex);
                const distance = Math.sqrt(
                    Math.pow(scannedRgb.r - targetRgb.r, 2) +
                    Math.pow(scannedRgb.g - targetRgb.g, 2) +
                    Math.pow(scannedRgb.b - targetRgb.b, 2)
                );

                if (distance < minDistance) {
                    minDistance = distance;
                    closest = p;
                }
            });

            if (closest) {
                document.getElementById('target-swatch').style.backgroundColor = closest.hex;
                document.getElementById('match-info').innerText = `‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ "${closest.char}"`;
                
                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
                const accuracy = Math.max(0, 100 - (minDistance / 4.41)).toFixed(1);
                document.getElementById('accuracy-score').innerText = `${accuracy}%`;
            }
        }

        window.onload = function() {
            renderTables();
            showTab('setup');
        }
    </script>
</body>
</html>
